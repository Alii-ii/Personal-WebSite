"use client";

import Footer from '@/components/footer';
import DotGrid from '@/effects/DotGrid';
import Magnet from '@/effects/Magnet';
import AnimatedContent from '@/effects/AnimatedContent';
import { useThemeColors } from '@/hooks/useThemeColors';
import Link from 'next/link';

/**
 * 首页组件 - Canvas 模式
 * 展示两个人物肖像和过渡文字
 * 使用阿里巴巴普惠体字体和自定义颜色系统
 */
export default function Home() {
  const { baseColor, activeColor } = useThemeColors();
  
  // 处理下划线文本点击事件
  const handleUnderlinedClick = (text) => {
    console.log('点击了下划线文本:', text);
    // 确保 text 是字符串类型
    const textStr = String(text || '');
    // 如果点击的是"投稿"或"post"，跳转到 Gallery 页面
    if (textStr.includes('投稿') || textStr.includes('post')) {
      window.location.href = '/gallery';
    }
  };

  return (
    <div className="min-h-screen w-full flex flex-col relative bg-bg pb-32 md:pb-40">

      {/* 背景点阵效果 */}
      <div className="absolute inset-0 z-0">
        <DotGrid 
          dotSize={3}
          gap={18}
          baseColor={baseColor}
          activeColor={activeColor}
          proximity={120}
          speedTrigger={80}
          shockRadius={200}
          shockStrength={3}
          maxSpeed={2000}
          resistance={800}
          returnDuration={1.2}
          className="opacity-75"
        />
      </div>

      {/* canvas - 自适应填满剩余空间 */}
      <AnimatedContent
        direction="vertical"
        reverse={false}
        distance={80}
        duration={1.2}
        delay={0.4}
        immediate={true}
        flex={true}
        className="flex-1 w-full"
      >
        <div className="flex-1 w-full flex items-center justify-center relative z-10">
          {/* Canvas 模式：两个人物肖像和过渡文字 */}
          <div className="flex items-center justify-center gap-20 mt-16">
            {/* 左侧人物肖像 */}
            <Magnet 
              magnetStrength={1}
              padding={80}
              wrapperClassName="cursor-pointer"
            >
              <div
                className="size-64 flex items-center justify-center"
                style={{
                  transform: 'rotate(-15deg)',
                }}
              >
                <img
                  src="/images/A.png"
                  alt="A面"
                  className="size-full opacity-90"
                  style={{
                    filter: 'drop-shadow(0 4px 40px rgba(91,103,215,0.18))'
                  }}
                />
              </div>
            </Magnet>

            {/* 中间过渡文字和箭头 */}
            <div className="text-secondary translate-y-[-48px] z-100">
              <svg width="162" height="28" viewBox="0 0 162 28" fill="">
                <path d="M45.5267 2.12926C44.8584 2.17495 44.3536 2.75376 44.3993 3.42209C44.445 4.09042 45.0238 4.59517 45.6922 4.54949L45.6094 3.33938L45.5267 2.12926ZM51.819 4.15226C52.4876 4.11132 52.9964 3.53609 52.9555 2.86746C52.9145 2.19883 52.3393 1.68998 51.6707 1.73092L51.7448 2.94159L51.819 4.15226ZM50.0699 4.89265C50.049 4.22309 49.4892 3.69729 48.8196 3.71824C48.1501 3.73918 47.6243 4.29895 47.6452 4.96851L48.8576 4.93058L50.0699 4.89265ZM49.0882 24.8198C49.0882 25.4896 49.6313 26.0327 50.3012 26.0327C50.9711 26.0327 51.5141 25.4896 51.5141 24.8198H50.3012H49.0882ZM46.9557 24.7871C46.2858 24.7871 45.7428 25.3301 45.7428 26C45.7428 26.6699 46.2858 27.2129 46.9557 27.2129V26V24.7871ZM54.2164 26.4173C54.8862 26.4173 55.4293 25.8743 55.4293 25.2044C55.4293 24.5345 54.8862 23.9915 54.2164 23.9915V25.2044V26.4173ZM63.5757 1.94891C63.5475 1.27962 62.9821 0.759926 62.3128 0.788141C61.6435 0.816355 61.1238 1.3818 61.152 2.05109L62.3639 2L63.5757 1.94891ZM61.4193 25.532C61.4475 26.2012 62.0129 26.7209 62.6822 26.6927C63.3515 26.6645 63.8712 26.0991 63.843 25.4298L62.6311 25.4809L61.4193 25.532ZM63.6896 3.24966C63.5587 2.59269 62.9201 2.16619 62.2631 2.29706C61.6061 2.42793 61.1796 3.0666 61.3105 3.72358L62.5 3.48662L63.6896 3.24966ZM67.275 13.9785L66.1999 14.5401L66.1999 14.5401L67.275 13.9785ZM71.6258 20.6319L72.6677 20.011L72.6677 20.011L71.6258 20.6319ZM75.4194 24.6453L74.3361 24.0997L74.3361 24.0997L75.4194 24.6453ZM75.5834 18.5576L74.3712 18.5997L74.3712 18.5997L75.5834 18.5576ZM75.1671 9.33108L73.9542 9.33837L75.1671 9.33108ZM76.6179 3.38823C76.8638 2.76514 76.5581 2.06063 75.935 1.81466C75.3119 1.5687 74.6074 1.87443 74.3614 2.49752L75.4897 2.94288L76.6179 3.38823ZM82.8358 1.74427C82.1745 1.63713 81.5516 2.08633 81.4445 2.7476C81.3373 3.40886 81.7865 4.03177 82.4478 4.13891L82.6418 2.94159L82.8358 1.74427ZM96.4877 4.49591C97.1575 4.49591 97.7006 3.95286 97.7006 3.28298C97.7006 2.61309 97.1575 2.07004 96.4877 2.07004V3.28298V4.49591ZM91.0786 3.62436C91.0786 2.95448 90.5356 2.41143 89.8657 2.41143C89.1958 2.41143 88.6528 2.95448 88.6528 3.62436H89.8657H91.0786ZM88.6528 24.1073C88.6528 24.7772 89.1958 25.3203 89.8657 25.3203C90.5356 25.3203 91.0786 24.7772 91.0786 24.1073H89.8657H88.6528ZM107.876 5.5939C107.897 4.92435 107.372 4.3643 106.702 4.34298C106.033 4.32167 105.473 4.84717 105.451 5.51671L106.664 5.55531L107.876 5.5939ZM103.709 25.1382C103.709 25.8081 104.252 26.3512 104.922 26.3512C105.592 26.3512 106.135 25.8081 106.135 25.1382H104.922H103.709ZM118.089 11.9976L116.916 11.691L116.916 11.691L118.089 11.9976ZM107.16 15.6697C106.49 15.6697 105.947 16.2127 105.947 16.8826C105.947 17.5525 106.49 18.0956 107.16 18.0956V16.8826V15.6697ZM104.763 1.84694C104.093 1.86587 103.566 2.42404 103.585 3.09366C103.604 3.76328 104.162 4.29077 104.832 4.27184L104.797 3.05939L104.763 1.84694ZM134.202 14.4729C133.533 14.4341 132.959 14.9448 132.921 15.6136C132.882 16.2823 133.393 16.8559 134.061 16.8947L134.132 15.6838L134.202 14.4729ZM153.018 18.1501L153.481 17.0292L153.481 17.0292L153.018 18.1501ZM160.531 21.6608C161.133 21.3665 161.382 20.6401 161.088 20.0383L156.292 10.2317C155.998 9.62992 155.271 9.38064 154.669 9.67493C154.068 9.96921 153.818 10.6956 154.113 11.2974L158.375 20.0144L149.658 24.2772C149.057 24.5715 148.807 25.2979 149.102 25.8997C149.396 26.5015 150.122 26.7507 150.724 26.4565L160.531 21.6608ZM27.6654 16.7824C28.3342 16.7436 28.8449 16.17 28.8061 15.5013C28.7673 14.8325 28.1937 14.3218 27.5249 14.3606L27.5952 15.5715L27.6654 16.7824ZM8.70858 18.0378L8.24527 16.9168L8.24527 16.9168L8.70858 18.0378ZM0.639135 19.926C0.344849 20.5278 0.594126 21.2542 1.19591 21.5485L11.0025 26.3441C11.6043 26.6384 12.3307 26.3891 12.625 25.7874C12.9193 25.1856 12.67 24.4592 12.0682 24.1649L3.35124 19.9021L7.61404 11.1851C7.90833 10.5833 7.65905 9.85688 7.05727 9.5626C6.45549 9.26831 5.72908 9.51759 5.43479 10.1194L0.639135 19.926ZM45.6094 3.33938L45.6922 4.54949C47.7343 4.4099 49.7764 4.27733 51.819 4.15226L51.7448 2.94159L51.6707 1.73092C49.6222 1.85636 47.5744 1.9893 45.5267 2.12926L45.6094 3.33938ZM48.8576 4.93058L47.6452 4.96851C47.7509 8.3462 48.1174 11.7104 48.4506 15.0061C48.7856 18.3197 49.0882 21.5739 49.0882 24.8198H50.3012H51.5141C51.5141 21.4378 51.199 18.0731 50.8642 14.762C50.5276 11.433 50.1723 8.16646 50.0699 4.89265L48.8576 4.93058ZM46.9557 26V27.2129C47.8347 27.2129 48.6328 26.9458 49.219 26.7563C49.868 26.5466 50.2976 26.4173 50.7205 26.4173V25.2044V23.9915C49.8505 23.9915 49.0547 24.26 48.4729 24.4481C47.8284 24.6564 47.3906 24.7871 46.9557 24.7871V26ZM50.7205 25.2044V26.4173H54.2164V25.2044V23.9915H50.7205V25.2044ZM62.3639 2L61.152 2.05109C61.3157 5.93417 61.3002 9.81607 61.2844 13.7318C61.2687 17.6384 61.2526 21.5787 61.4193 25.532L62.6311 25.4809L63.843 25.4298C63.6791 21.5417 63.6945 17.6573 63.7103 13.7416C63.726 9.83514 63.7422 5.89726 63.5757 1.94891L62.3639 2ZM62.5 3.48662L61.3105 3.72358C61.6783 5.56993 62.5433 7.56546 63.4688 9.41581C64.3785 11.2346 65.4639 13.1312 66.1999 14.5401L67.275 13.9785L68.35 13.4169C67.526 11.8394 66.5588 10.1708 65.6384 8.33067C64.7338 6.52204 63.9914 4.76481 63.6896 3.24966L62.5 3.48662ZM67.275 13.9785L66.1999 14.5401C66.8651 15.8135 67.6544 16.9639 68.4187 18.0471C69.1957 19.1482 69.9353 20.1645 70.5839 21.2529L71.6258 20.6319L72.6677 20.011C71.9584 18.8208 71.1473 17.7064 70.4008 16.6484C69.6416 15.5725 68.9344 14.5355 68.35 13.4169L67.275 13.9785ZM71.6258 20.6319L70.5839 21.2529C70.746 21.5249 71.08 21.9606 71.4321 22.3961C71.8044 22.8566 72.2581 23.3913 72.7056 23.8894C73.147 24.3808 73.6069 24.8642 73.9865 25.2057C74.1642 25.3657 74.3849 25.5504 74.6093 25.679C74.7041 25.7333 74.9275 25.8548 75.2191 25.8855C75.3805 25.9025 75.6271 25.8984 75.892 25.7782C76.1777 25.6486 76.3824 25.4299 76.5027 25.1909L75.4194 24.6453L74.3361 24.0997C74.443 23.8876 74.6285 23.6877 74.8896 23.5692C75.1299 23.4601 75.3465 23.4596 75.473 23.4729C75.5993 23.4862 75.6903 23.5185 75.7322 23.5351C75.7783 23.5533 75.8073 23.5696 75.8157 23.5744C75.8257 23.5801 75.7626 23.5405 75.6092 23.4025C75.3265 23.1481 74.9347 22.7409 74.5102 22.2683C74.0918 21.8025 73.6653 21.2998 73.3185 20.8709C72.9515 20.417 72.7274 20.1112 72.6677 20.011L71.6258 20.6319ZM75.4194 24.6453L76.5027 25.1909C76.771 24.6582 76.889 24.033 76.946 23.4632C77.0049 22.8748 77.0079 22.2415 76.9885 21.6359C76.969 21.0275 76.9257 20.4186 76.8855 19.8801C76.8441 19.3271 76.8079 18.8705 76.7956 18.5155L75.5834 18.5576L74.3712 18.5997C74.3857 19.0166 74.4273 19.5384 74.4663 20.0609C74.5065 20.5979 74.5462 21.1616 74.5639 21.7136C74.5817 22.2684 74.5761 22.7832 74.5322 23.2215C74.4865 23.6783 74.4074 23.9582 74.3361 24.0997L75.4194 24.6453ZM75.5834 18.5576L76.7956 18.5155C76.6852 15.3369 76.3988 12.4494 76.38 9.3238L75.1671 9.33108L73.9542 9.33837C73.9729 12.4515 74.2696 15.6742 74.3712 18.5997L75.5834 18.5576ZM75.1671 9.33108L76.38 9.3238C76.3768 8.79779 76.3507 8.23402 76.3263 7.68702C76.3015 7.13026 76.2782 6.58239 76.2759 6.04628C76.2711 4.94727 76.3593 4.04335 76.6179 3.38823L75.4897 2.94288L74.3614 2.49752C73.9242 3.6052 73.8451 4.9 73.85 6.0567C73.8526 6.64844 73.8783 7.24268 73.9029 7.7949C73.9279 8.35689 73.9514 8.86899 73.9542 9.33837L75.1671 9.33108ZM82.6418 2.94159L82.4478 4.13891C87.0883 4.89079 92.0501 4.49591 96.4877 4.49591V3.28298V2.07004C91.7729 2.07004 87.2194 2.45453 82.8358 1.74427L82.6418 2.94159ZM89.8657 3.62436H88.6528V24.1073H89.8657H91.0786V3.62436H89.8657ZM106.664 5.55531L105.451 5.51671C105.349 8.72771 104.923 11.9115 104.511 15.1822C104.102 18.4307 103.709 21.7556 103.709 25.1382H104.922H106.135C106.135 21.9259 106.508 18.7395 106.918 15.4853C107.325 12.2533 107.769 8.94307 107.876 5.5939L106.664 5.55531ZM118.089 11.9976L116.916 11.691C116.386 13.7182 114.933 14.7098 113.032 15.2149C111.068 15.7368 108.865 15.6697 107.16 15.6697V16.8826V18.0956C108.729 18.0956 111.312 18.1821 113.655 17.5594C116.061 16.92 118.436 15.4692 119.263 12.3042L118.089 11.9976ZM104.797 3.05939L104.832 4.27184C106.351 4.22891 110 4.52271 112.968 5.72312C114.45 6.32252 115.639 7.09902 116.348 8.05416C117.016 8.9525 117.331 10.1001 116.916 11.691L118.089 11.9976L119.263 12.3042C119.856 10.0347 119.422 8.12338 118.296 6.60759C117.212 5.14861 115.563 4.15583 113.878 3.47423C110.512 2.11265 106.507 1.79766 104.763 1.84694L104.797 3.05939ZM134.132 15.6838L134.061 16.8947C137.175 17.0753 140.325 17.091 143.578 17.3678C146.781 17.6403 149.856 18.1556 152.555 19.2711L153.018 18.1501L153.481 17.0292C150.447 15.7749 147.086 15.2316 143.784 14.9506C140.531 14.6739 137.105 14.6413 134.202 14.4729L134.132 15.6838ZM153.018 18.1501L152.555 19.2711C154.745 20.1765 156.464 20.6409 159.604 21.7184L159.998 20.5712L160.392 19.4239C157.089 18.2906 155.585 17.8988 153.481 17.0292L153.018 18.1501ZM27.5952 15.5715L27.5249 14.3606C24.6217 14.529 21.1957 14.5616 17.9429 14.8383C14.6403 15.1193 11.28 15.6625 8.24527 16.9168L8.70858 18.0378L9.17189 19.1588C11.8707 18.0433 14.9454 17.5279 18.1485 17.2554C21.4015 16.9787 24.5521 16.963 27.6654 16.7824L27.5952 15.5715ZM8.70858 18.0378L8.24527 16.9168C6.14129 17.7864 4.63756 18.1783 1.33506 19.3116L1.72876 20.4588L2.12246 21.6061C5.26244 20.5286 6.98139 20.0641 9.17189 19.1588L8.70858 18.0378Z" 
                  fill="currentColor" />
              </svg>
            </div>

            {/* 右侧人物肖像 */}
            <Magnet 
              magnetStrength={1}
              padding={80}
              wrapperClassName="cursor-pointer"
            >
              <div
                className="size-64 flex items-center justify-center"
                style={{
                  transform: 'rotate(15deg)',
                }}
              >
                <img
                  src="/images/B.png"
                  alt="B面"
                  className="size-full "
                  style={{
                    filter: 'drop-shadow(0 4px 40px rgba(91,103,215,0.18))'
                  }}
                />
              </div>
            </Magnet>
          </div>
        </div>
      </AnimatedContent>

      <Footer onUnderlinedClick={handleUnderlinedClick} />
    </div>
  );
}